@model IEnumerable<Student_Profile.Models.StudentProfile>

@{
    ViewData["Title"] = "Students Directory";
}

<div class="container my-5">
    <div class="row mb-5 align-items-center">
        <div class="col-md-6">
            <h1 class="display-5 fw-bold text-primary">Students Directory</h1>
            <p class="text-muted">Discover and connect with talented students from Port Said University.</p>
        </div>
        <div class="col-md-6">
            <form method="get" class="d-flex shadow-sm">
                <input type="text" name="search" class="form-control form-control-lg border-end-0 rounded-start"
                       placeholder="Search by name, skills, or department..." style="border-radius: 10px 0 0 10px;">
                <button type="submit" class="btn btn-primary px-4" style="border-radius: 0 10px 10px 0;">
                    <i class="bi bi-search"></i>
                </button>
            </form>
        </div>
    </div>

    <hr class="mb-5">

    <div class="row g-4">
        @if (!Model.Any())
        {
            <div class="col-12 text-center py-5">
                <i class="bi bi-people text-muted display-1"></i>
                <p class="mt-3 fs-4 text-muted">No students found at the moment.</p>
            </div>
        }
        else
        {
            @foreach (var student in Model)
            {
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm student-card">
                        <div class="card-body text-center p-4">
                            <div class="mb-3">
                                <img src="~/uploads/student-profiles/@(student.ProfileImageUrl ?? "default-avatar.png")"
                                     class="rounded-circle shadow-sm border border-3 border-light"
                                     style="width: 100px; height: 100px; object-fit: cover;"
                                     alt="@student.User.FullName">
                            </div>

                            <h5 class="card-title fw-bold mb-1">@student.User.FullName</h5>
                            <p class="text-primary small mb-3">@student.Department</p>

                            <div class="mb-4">
                                @if (!string.IsNullOrEmpty(student.Skills))
                                {
                                    var skills = student.Skills.Split(',').Take(3); 
                                    foreach (var skill in skills)
                                    {
                                        <span class="badge bg-light text-secondary border me-1">@skill.Trim()</span>
                                    }
                                }
                            </div>

                            <p class="card-text text-muted small mb-4 text-truncate-2">
                                @(student.Bio?.Length > 100 ? student.Bio.Substring(0, 100) + "..." : student.Bio)
                            </p>

                            <a asp-action="Details" asp-route-slug="@student.ProfileSlug" class="btn btn-outline-primary w-100 rounded-pill">
                                View Full CV
                            </a>
                        </div>
                    </div>
                </div>
            }
        }
    </div>
</div>

<style>
    .student-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
        }

    .text-truncate-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }
</style>